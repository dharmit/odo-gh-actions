"use strict";(self.webpackChunkodo_dev=self.webpackChunkodo_dev||[]).push([[5413],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>u});var i=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,i,r=function(e,n){if(null==e)return{};var t,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)t=a[i],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)t=a[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=i.createContext({}),d=function(e){var n=i.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},c=function(e){var n=d(e.components);return i.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},m=i.forwardRef((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=d(t),u=r,f=m["".concat(s,".").concat(u)]||m[u]||p[u]||a;return t?i.createElement(f,o(o({ref:n},c),{},{components:t})):i.createElement(f,o({ref:n},c))}));function u(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,o=new Array(a);o[0]=m;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var d=2;d<a;d++)o[d]=t[d];return i.createElement.apply(null,o)}return i.createElement.apply(null,t)}m.displayName="MDXCreateElement"},5925:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>l,toc:()=>d});var i=t(3117),r=(t(7294),t(3905));const a={title:"odo add binding"},o=void 0,l={unversionedId:"command-reference/add-binding",id:"command-reference/add-binding",title:"odo add binding",description:"Description",source:"@site/docs/command-reference/add-binding.md",sourceDirName:"command-reference",slug:"/command-reference/add-binding",permalink:"/odo-gh-actions/docs/command-reference/add-binding",editUrl:"https://github.com/redhat-developer/odo/edit/main/docs/website/docs/command-reference/add-binding.md",tags:[],version:"current",frontMatter:{title:"odo add binding"},sidebar:"tutorialSidebar",previous:{title:"JSON Output",permalink:"/odo-gh-actions/docs/command-reference/json-output"},next:{title:"odo build-images",permalink:"/odo-gh-actions/docs/command-reference/build-images"}},s={},d=[{value:"Description",id:"description",level:2},{value:"Running the Command",id:"running-the-command",level:2},{value:"Pre-requisites",id:"pre-requisites",level:3},{value:"Interactive Mode",id:"interactive-mode",level:3},{value:"Non-interactive mode",id:"non-interactive-mode",level:3},{value:"Understanding Bind as Files",id:"understanding-bind-as-files",level:4},{value:"Formats supported by the <code>--service</code> flag",id:"formats-supported-by-the---service-flag",level:4},{value:"Formats supported by the <code>--workload</code> flag",id:"formats-supported-by-the---workload-flag",level:4},{value:"Using different formats",id:"using-different-formats",level:3}],c={toc:d};function p(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,i.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"description"},"Description"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"odo add binding")," command adds a link between an Operator-backed service and a component. odo uses the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/redhat-developer/service-binding-operator/"},"Service Binding Operator")," to create this link. "),(0,r.kt)("p",null,"Running this command from a directory containing a Devfile will modify the Devfile, and once pushed (using ",(0,r.kt)("inlineCode",{parentName:"p"},"odo dev"),") to the cluster, it creates an instance of the ",(0,r.kt)("inlineCode",{parentName:"p"},"ServiceBinding")," resource."),(0,r.kt)("p",null,"Running this command from a directory without a Devfile in the interactive mode will perform one or several operations,\ndepending on your choice:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"display the YAML definition of the Service binding in the output,"),(0,r.kt)("li",{parentName:"ul"},"save the YAML definition of the ServiceBinding on a file,"),(0,r.kt)("li",{parentName:"ul"},"create an instance of the ServiceBinding resource on the cluster.")),(0,r.kt)("p",null,"In non-interactive mode from a directory without a Devfile, the only possible operation is to display the YAML definition of the Service binding in the output."),(0,r.kt)("p",null,"Currently, it only allows connecting to the Operator-backed services which support binding via the Service Binding Operator.\nTo know about the Operators supported by the Service Binding Operator, read its ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/redhat-developer/service-binding-operator#known-bindable-operators"},"README"),"."),(0,r.kt)("h2",{id:"running-the-command"},"Running the Command"),(0,r.kt)("h3",{id:"pre-requisites"},"Pre-requisites"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A cluster with the Service Binding Operator installed (see installation instructions for ",(0,r.kt)("a",{parentName:"li",href:"/odo-gh-actions/docs/overview/cluster-setup/kubernetes#installing-the-service-binding-operator"},"Kubernetes")," and ",(0,r.kt)("a",{parentName:"li",href:"/odo-gh-actions/docs/overview/cluster-setup/openshift#installing-the-service-binding-operator"},"OpenShift")," cluster)"),(0,r.kt)("li",{parentName:"ul"},"Operator-backed services or resources you want to bind your application to"),(0,r.kt)("li",{parentName:"ul"},"Optional, a directory containing a Devfile; if you don't have one, see ",(0,r.kt)("a",{parentName:"li",href:"/odo-gh-actions/docs/command-reference/init"},"odo init")," on obtaining a devfile.")),(0,r.kt)("h3",{id:"interactive-mode"},"Interactive Mode"),(0,r.kt)("p",null,"In the interactive mode, you will be guided to choose:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"the namespace containing the service instance you want to bind to,"),(0,r.kt)("li",{parentName:"ul"},"a service from the list of bindable service instances as supported by the Service Binding Operator;\nif a namespace is selected, the list of services will show the services in that namespace;\notherwise, the list of services will show the services in the current namespace,"),(0,r.kt)("li",{parentName:"ul"},"if a Devfile is not present in the directory, a workload resource,"),(0,r.kt)("li",{parentName:"ul"},"option to bind the service as a file (see ",(0,r.kt)("a",{parentName:"li",href:"#understanding-bind-as-files"},"Understanding Bind as Files")," for more information on this),"),(0,r.kt)("li",{parentName:"ul"},"a name for the binding.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# Add binding between a service, and the component present in the working directory in the interactive mode\nodo add binding\n")),(0,r.kt)("h3",{id:"non-interactive-mode"},"Non-interactive mode"),(0,r.kt)("p",null,"In the non-interactive mode, you will have to specify the following required information through the command-line:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--service")," flag to specify the service you want to bind to,"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--service-namespace")," flag to specify the namespace containing the service you want to bind to; the current namespace is used if this flag is not specified."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--workload")," flag to specify the workload resource, if a Devfile is not present in the directory,"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--name")," flag to specify a name for the binding (see ",(0,r.kt)("a",{parentName:"li",href:"#understanding-bind-as-files"},"Understanding Bind as Files")," for more information on this)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--bind-as-files")," flag to specify if the service should be bound as a file; this flag is set to true by default."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--naming-strategy")," flag to specify the naming strategy to use for binding names. This flag is empty by default,\nbut it can be set to pre-defined strategies: ",(0,r.kt)("inlineCode",{parentName:"li"},"none"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"lowercase"),", or ",(0,r.kt)("inlineCode",{parentName:"li"},"uppercase"),".\nOtherwise, it is treated as a custom Go template, and it is handled accordingly.\nRefer to ",(0,r.kt)("a",{parentName:"li",href:"https://docs.openshift.com/container-platform/4.10/applications/connecting_applications_to_services/binding-workloads-using-sbo.html#sbo-naming-strategies_binding-workloads-using-sbo"},"this page")," for more details on naming strategies.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# Add binding between a service named 'cluster-sample',\n# and the component present in the working directory in the non-interactive mode\nodo add binding --name mybinding --service cluster-sample\n")),(0,r.kt)("h4",{id:"understanding-bind-as-files"},"Understanding Bind as Files"),(0,r.kt)("p",null,"To connect your component with a service, you need to store some data (e.g. username, password, host address) on your component's container.\nIf the service is bound as files, this data will be written to a file and stored on the container, else it will be injected as Environment Variables inside the container."),(0,r.kt)("p",null,"Note that every piece of data is stored in its own individual file or environment variable.\nFor example, if your data includes a username and password, then 2 separate files, or 2 environment variables will be created to store them both."),(0,r.kt)("h4",{id:"formats-supported-by-the---service-flag"},"Formats supported by the ",(0,r.kt)("inlineCode",{parentName:"h4"},"--service")," flag"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"--service")," flag supports the following formats to specify the service name:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"<name>")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"<name>.<kind>")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"<name>.<kind>.<apigroup>")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"<name>/<kind>")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"<name>/<kind>.<apigroup>"))),(0,r.kt)("h4",{id:"formats-supported-by-the---workload-flag"},"Formats supported by the ",(0,r.kt)("inlineCode",{parentName:"h4"},"--workload")," flag"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"--workload")," flag supports the following formats to specify the workload name:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"<name>.<kind>.<apigroup>")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"<name>/<kind>.<apigroup>"))),(0,r.kt)("p",null,"The above formats are helpful when multiple services with the same name exist on the cluster."),(0,r.kt)("h3",{id:"using-different-formats"},"Using different formats"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# Add binding between a service named 'cluster-sample', and the component present in the working directory\nodo add binding --service cluster-sample --name restapi-cluster-sample\n\n# Add binding between service named 'cluster-sample' of kind 'Cluster', and APIGroup 'postgresql.k8s.enterprisedb.io',\n# and the component present in the working directory \nodo add binding --service cluster-sample/Cluster.postgresql.k8s.enterprisedb.io --name restapi-cluster-sample\nodo add binding --service cluster-sample.Cluster.postgresql.k8s.enterprisedb.io --name restapi-cluster-sample\n\n# Add binding between service named 'cluster-sample' of kind 'Cluster',\n# and the component present in the working directory\nodo add binding --service cluster-sample/Cluster --name restapi-cluster-sample\nodo add binding --service cluster-sample.Cluster --name restapi-cluster-sample\n")))}p.isMDXComponent=!0}}]);